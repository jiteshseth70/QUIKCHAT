<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>QuikChat - Random Video Chat</title>
    <meta name="description" content="Free random 1-on-1 video chat with strangers">
    <meta name="theme-color" content="#3db0ff">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ¥</text></svg>">
</head>
<body>
    <!-- Loading Screen -->
    <div class="screen active" id="loadingScreen">
        <div class="loading-content">
            <div class="logo-large">
                <i class="fas fa-video"></i>
                <h1>QuikChat</h1>
            </div>
            <div class="loading-spinner"></div>
            <p>Loading your video chat experience...</p>
        </div>
    </div>

    <!-- Home Screen -->
    <div class="screen" id="homeScreen">
        <div class="container">
            <header class="app-header">
                <div class="logo">
                    <i class="fas fa-video"></i>
                    <span>QuikChat</span>
                </div>
                <div class="stats">
                    <span id="onlineCount">0</span> online
                </div>
            </header>

            <main class="main-content">
                <div class="hero-section">
                    <h2>Talk to Strangers!</h2>
                    <p>Random 1-on-1 video chat with people worldwide</p>
                    
                    <div class="action-buttons">
                        <button class="btn btn-primary btn-lg" id="startVideoChat">
                            <i class="fas fa-video"></i>
                            Start Video Chat
                        </button>
                        
                        <button class="btn btn-secondary" id="startTextChat">
                            <i class="fas fa-comment"></i>
                            Text Chat Only
                        </button>
                    </div>
                </div>

                <div class="quick-options">
                    <h3><i class="fas fa-sliders-h"></i> Quick Options</h3>
                    
                    <div class="options-grid">
                        <div class="option-card" data-gender="both">
                            <i class="fas fa-venus-mars"></i>
                            <span>Any Gender</span>
                        </div>
                        
                        <div class="option-card" data-gender="male">
                            <i class="fas fa-mars"></i>
                            <span>Male Only</span>
                        </div>
                        
                        <div class="option-card" data-gender="female">
                            <i class="fas fa-venus"></i>
                            <span>Female Only</span>
                        </div>
                    </div>
                    
                    <div class="country-selector">
                        <select id="countrySelect" class="form-select">
                            <option value="">Any Country</option>
                            <option value="us">ğŸ‡ºğŸ‡¸ USA</option>
                            <option value="in">ğŸ‡®ğŸ‡³ India</option>
                            <option value="gb">ğŸ‡¬ğŸ‡§ UK</option>
                            <option value="ca">ğŸ‡¨ğŸ‡¦ Canada</option>
                            <option value="au">ğŸ‡¦ğŸ‡º Australia</option>
                            <option value="de">ğŸ‡©ğŸ‡ª Germany</option>
                            <option value="fr">ğŸ‡«ğŸ‡· France</option>
                            <option value="jp">ğŸ‡¯ğŸ‡µ Japan</option>
                        </select>
                    </div>
                </div>

                <div class="user-profile" id="userProfile">
                    <!-- User profile will be loaded here -->
                </div>
            </main>
        </div>
    </div>

    <!-- Video Chat Screen -->
    <div class="screen" id="videoChatScreen">
        <div class="video-container">
            <div class="video-header">
                <button class="btn-icon back-btn" id="endCallBtn">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="call-info">
                    <h3 id="partnerName">Connecting...</h3>
                    <p id="callTimer">00:00</p>
                </div>
                <div class="call-actions">
                    <button class="btn-icon" id="toggleChat">
                        <i class="fas fa-comment"></i>
                    </button>
                </div>
            </div>

            <div class="video-wrappers">
                <div class="remote-video-wrapper">
                    <video id="remoteVideo" autoplay playsinline></video>
                    <div class="video-overlay">
                        <div class="partner-info">
                            <div class="avatar" id="partnerAvatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="info">
                                <h4 id="partnerNameOverlay">Stranger</h4>
                                <p id="partnerCountry">ğŸŒ Connecting...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="local-video-wrapper">
                    <video id="localVideo" autoplay playsinline muted></video>
                    <div class="local-overlay">
                        <span>You</span>
                    </div>
                </div>
            </div>

            <div class="video-controls">
                <button class="control-btn" id="toggleVideo">
                    <i class="fas fa-video"></i>
                </button>
                
                <button class="control-btn" id="toggleAudio">
                    <i class="fas fa-microphone"></i>
                </button>
                
                <button class="control-btn danger" id="endCall">
                    <i class="fas fa-phone-slash"></i>
                </button>
                
                <button class="control-btn" id="toggleScreen">
                    <i class="fas fa-expand"></i>
                </button>
                
                <button class="control-btn" id="swapCamera">
                    <i class="fas fa-sync-alt"></i>
                </button>
            </div>

            <!-- Chat Panel -->
            <div class="chat-panel" id="chatPanel">
                <div class="chat-header">
                    <h4>Chat</h4>
                    <button class="btn-icon close-chat">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="chat-messages" id="chatMessages">
                    <!-- Messages will appear here -->
                </div>
                
                <div class="chat-input">
                    <input type="text" id="messageInput" placeholder="Type a message...">
                    <button class="btn btn-primary" id="sendMessage">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer"></div>

    <!-- Scripts -->
    <script src="https://cdn.socket.io/4.6.0/socket.io.min.js"></script>
    <script src="script.js"></script>
    
    <!-- PWA Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').catch(console.error);
        }
        
        // Create manifest dynamically
        const manifest = {
            "name": "QuikChat",
            "short_name": "QuikChat",
            "description": "Random Video Chat",
            "start_url": "/",
            "display": "standalone",
            "background_color": "#0b1220",
            "theme_color": "#3db0ff",
            "icons": []
        };
        
        // Generate icons
        const iconSizes = [72, 96, 128, 144, 152, 192, 384, 512];
        manifest.icons = iconSizes.map(size => ({
            src: `data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22 fill=%22%233db0ff%22>ğŸ¥</text></svg>`,
            sizes: `${size}x${size}`,
            type: "image/svg+xml",
            purpose: "any maskable"
        }));
        
        const manifestElement = document.createElement('link');
        manifestElement.rel = 'manifest';
        manifestElement.href = 'data:application/manifest+json,' + encodeURIComponent(JSON.stringify(manifest));
        document.head.appendChild(manifestElement);
    </script>
</body>
    </html>
